## Error Analysis

・学習アルゴリズムがまだ人間のパフォーマンスに達していない場合に行う

・Error Analysis：アルゴリズムのご分類を手動で調べる

　（モデルがうまくいかない→仮説を立てる（アイデア複数）→どのアイデアに取り組むべきか、を判断）

EX) 猫の分類モデル→犬を猫と分類してしまっているのではないかという仮説



#### 手順

1. 100個の誤分類されたdevセットを取得

2. その中で犬の写真がどれだけあるかカウントする。　

   →たった5枚しかなかった。犬の問題の解決に注力するのはコスパ悪い



![image-20191220101635315](C:\Users\daich\AppData\Roaming\Typora\typora-user-images\image-20191220101635315.png)

#### そもそもラベル付けが間違っていた場合は？

【トレーニングセットのエラーの場合】

・ディープラーニングの場合は、トレーニングセットのランダムエラーに対しては非常に堅牢

↓

データセットが大きい＆エラーがランダム　→　放置でOK

システマチックエラー（例：ラベラーが一貫して白い犬を猫としてしまっている）→モデルは白い犬を猫と学習してしまう



【Dev/Testセットのエラーの場合】

・エラー分析で列を1つ追加して、誤ラベルが付けられた例の数をカウントする

　→誤ラベルが起因となるエラーの割合を図り、対応すべきかを判断する



![image-20191220102905888](C:\Users\daich\AppData\Roaming\Typora\typora-user-images\image-20191220102905888.png)



※基本的に、トレーニングセットラベルの修正よりも、Dev/Testセットラベル修正のほうが重要



#### そのほか

・最初のシステムは迅速に構築しよう.。そこからエラー分析を駆使して次にどんなアクションをとっていくのか、優先順位付けをしよう。



## Training set と Dev / Test set のミスマッチに関して

・分布が異なることがしばしばある

例）訓練データは、ウェブから集めてきた高解像度の猫画像

しかし、実際にモバイルアプリに組み込んで、ユーザーがアップするのはもっとぼやけた低解像度のデータだった。



![image-20191220104259654](C:\Users\daich\AppData\Roaming\Typora\typora-user-images\image-20191220104259654.png)

Option1：ぼやけた画像と高解像度写真を合わせて混ぜて分配

→開発/テストセットの画像の多くが高解像の実際アップされるものとは異なる画像になってしまい、NG



Option2：開発テストセットは、ぼやけ画像のみにし、ぼやけ画像の半分を訓練セットに混ぜる



#### Training-dev セット

・Trainデータと、Devセットが異なる分布で、両者に大きな精度の乖離があった

→これはVariance問題、と結論付けてよいか？

Devセットはぼやけた画像で、Trainセットは明瞭な画像で（＝分布が異なるデータ）で、それが原因で精度の乖離が生じた可能性もある（ぼやけた画像のほうが当然精度は落ちる）



→Train-devセットを、Trainセットから切り分けて用意してあげる。TrainとTrain-devセットに関しては分布は同じであり、これまでのavoidable biasとvarianceの分析ができる。

![image-20191220111118831](C:\Users\daich\AppData\Roaming\Typora\typora-user-images\image-20191220111118831.png)

#### Artificial Data Synthesis

・エラー分析をしてTraining⇔Dev/Testセットの分布の違いの問題があることがわかったらどうする？

１つ試してみる価値のあるアイデアとして、人工データ合成がある

![image-20191220113827902](C:\Users\daich\AppData\Roaming\Typora\typora-user-images\image-20191220113827902.png)

例）車の音声起動型アプリケーション

・音声データ。開発セットは訓練データよりも非常にノイズが多い→ノイズは車の騒音だとわかった。

・車のバックグラウンドノイズ、高速道路のバックグラウンドノイズを、訓練データセットのきれいな音声と合成する＝疑似的に車の中で記録されるようなデータを作成する

